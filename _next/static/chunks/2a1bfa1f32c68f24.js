(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64571,75712,25720,98586,e=>{"use strict";var s=e.i(20228);e.s(["Button",()=>s.default],64571);var t=e.i(26240);e.s(["Card",()=>t.default],75712);var r=e.i(35759);e.s(["Flex",()=>r.default],25720);var l=e.i(77380);e.s(["Typography",()=>l.default],98586)},92989,(e,s,t)=>{s.exports=e.r(76562)},76516,e=>{"use strict";var s=e.i(71645);let t=()=>{let e=window;return e.SpeechRecognition||e.webkitSpeechRecognition};e.s(["useSpeechRecognition",0,(e={})=>{let[r]=(0,s.useState)(()=>!!t()),[l,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(""),[c,o]=(0,s.useState)(""),[d,u]=(0,s.useState)(null),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{let s=t();if(!s)return;let r=new s;return r.continuous=e.continuous??!0,r.interimResults=e.interimResults??!0,r.lang=e.lang??"zh-CN",r.onresult=e=>{let{resultIndex:s,results:t}=e,r=Array.from(t).slice(s).filter(e=>e.isFinal).map(e=>e[0].transcript).join(""),l=t[s],n=l&&!l.isFinal?l[0].transcript:"";r&&a(e=>`${e}${r}`),o(n)},r.onerror=e=>{u(e.error),n(!1)},r.onend=()=>{n(!1)},x.current=r,()=>{x.current?.stop(),x.current=null}},[e.continuous,e.interimResults,e.lang]);let m=(0,s.useCallback)(()=>{u(null),a(""),o("");try{x.current?.start(),n(!0)}catch(e){u(e instanceof Error?e.message:"无法启动语音识别"),n(!1)}},[]);return{supported:r,listening:l,transcript:i,interimTranscript:c,error:d,start:m,stop:(0,s.useCallback)(()=>{x.current?.stop(),n(!1)},[]),reset:(0,s.useCallback)(()=>{a(""),o(""),u(null)},[])}}])},49078,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(64571),l=e.i(75712),n=e.i(25720),i=e.i(98586),a=e.i(92989),c=e.i(76516);let o=["啊","波","神","么","嘛","马","驴","哦","破","去"],{Title:d,Paragraph:u,Text:x}=i.Typography;e.s(["default",0,()=>{let e=(0,a.useParams)(),i=(0,a.useRouter)(),m=e?.id,[h,p]=(0,t.useState)(0),[g,y]=(0,t.useState)({}),{supported:f,listening:b,transcript:j,interimTranscript:v,start:w,stop:N,reset:S}=(0,c.useSpeechRecognition)({lang:"zh-CN",continuous:!0,interimResults:!0}),k=(0,t.useMemo)(()=>o[h],[h]),C=h===o.length-1,R=()=>{S(),w()},z=()=>{N()},B=()=>{y(e=>({...e,[h]:j||v||""}))};return(0,s.jsx)("div",{className:"min-h-screen bg-linear-to-br from-sky-100 via-white to-pink-100",children:(0,s.jsx)(n.Flex,{justify:"center",align:"center",className:"min-h-screen px-4 py-10",children:(0,s.jsxs)(l.Card,{className:"w-full max-w-3xl shadow-xl rounded-2xl",styles:{body:{padding:"28px"}},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 pb-4",children:[(0,s.jsx)(d,{level:3,style:{marginBottom:0},children:"读一读"}),(0,s.jsx)(x,{type:"secondary",children:m?`学号：${m}`:"小朋友，加油！"}),(0,s.jsx)(x,{className:"text-sky-600",children:`题目 ${h+1} / ${o.length}`})]}),!f&&(0,s.jsx)("div",{className:"mb-4 rounded-lg bg-amber-50 px-3 py-2 text-amber-700",children:"当前浏览器不支持语音识别，请使用 Chrome/Edge/Safari。"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-[240px,1fr] items-center",children:[(0,s.jsx)("div",{className:"flex h-48 w-full items-center justify-center rounded-2xl bg-white text-6xl font-bold shadow-inner text-sky-700",children:k}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)(u,{className:"text-lg font-semibold text-sky-700",children:["请大声读出：",k]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)(r.Button,{type:"primary",size:"large",className:"px-4",onMouseDown:R,onMouseUp:z,onTouchStart:R,onTouchEnd:z,disabled:!f,children:b?"正在录音…":"开始朗读"}),(0,s.jsx)(r.Button,{size:"large",onClick:()=>{B(),S(),C||p(e=>Math.min(e+1,o.length-1))},disabled:b||C,children:"下一题"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-dashed border-zinc-200 bg-white px-3 py-2 text-sm text-zinc-800 shadow-inner",children:[(0,s.jsx)(x,{type:"secondary",children:"我的朗读（实时）："}),(0,s.jsx)(u,{style:{marginBottom:0},children:v||"等待录音…"})]}),(0,s.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm text-zinc-800 shadow-inner",children:[(0,s.jsx)(x,{type:"secondary",children:"已记录："}),(0,s.jsx)(u,{style:{marginBottom:0},children:j||g[h]||"尚未记录"})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-between sm:items-center",children:[(0,s.jsx)(x,{className:"text-sky-700",children:"小提示：先按“开始朗读”，读完松开手指，然后进入下一题。"}),(0,s.jsx)(r.Button,{type:"primary",size:"large",className:"px-6",onClick:()=>{B(),i.push(`/student/${m??""}`)},disabled:b||C&&!j,children:"提交并返回"})]})]})})})}])}]);